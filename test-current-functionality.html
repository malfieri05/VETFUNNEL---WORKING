<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Functionality Test - Veteran Life Insurance</title>
    <style>
        body {
            font-family: Arial, sans-serif;
            max-width: 800px;
            margin: 50px auto;
            padding: 20px;
        }
        .test-section {
            margin-bottom: 30px;
            padding: 20px;
            border: 1px solid #ddd;
            border-radius: 8px;
        }
        .test-section h3 {
            margin-top: 0;
            color: #1e3a8a;
        }
        .status {
            padding: 10px;
            border-radius: 4px;
            margin: 10px 0;
        }
        .success { background: #d1fae5; color: #065f46; }
        .error { background: #fee2e2; color: #991b1b; }
        .warning { background: #fef3c7; color: #92400e; }
        button {
            background: #1e3a8a;
            color: white;
            padding: 10px 20px;
            border: none;
            border-radius: 4px;
            cursor: pointer;
            margin: 5px;
        }
        button:hover { background: #1e40af; }
        .log {
            background: #f3f4f6;
            padding: 10px;
            border-radius: 4px;
            font-family: monospace;
            font-size: 12px;
            max-height: 200px;
            overflow-y: auto;
        }
    </style>
</head>
<body>
    <h1>üîç Functionality Test - Veteran Life Insurance</h1>
    
    <div class="test-section">
        <h3>üìß Email System Test</h3>
        <p>Test if emails are being sent to michaelalfieri.ffl@gmail.com</p>
        <button onclick="testEmailSystem()">Test Email System</button>
        <div id="email-status"></div>
    </div>
    
    <div class="test-section">
        <h3>üìä Google Sheets Test</h3>
        <p>Test if data is being written to Google Sheets</p>
        <button onclick="testGoogleSheets()">Test Google Sheets</button>
        <div id="sheets-status"></div>
    </div>
    
    <div class="test-section">
        <h3>üìù Form Data Capture Test</h3>
        <p>Test if all user selections are being captured</p>
        <button onclick="testFormCapture()">Test Form Capture</button>
        <div id="capture-status"></div>
    </div>
    
    <div class="test-section">
        <h3>üîß Console Logs</h3>
        <p>Check for any JavaScript errors or issues</p>
        <button onclick="checkConsole()">Check Console</button>
        <div id="console-status"></div>
    </div>
    
    <div class="test-section">
        <h3>üìã Test Results</h3>
        <div id="test-results"></div>
    </div>

    <script>
        const GOOGLE_APPS_SCRIPT_URL = 'https://script.google.com/macros/s/AKfycby_sULo99YIinnK3QDE97ERKl8kpKYX2aV-SzNIM_-mn601LcYU5jcTvLJPLUVptBzb/exec';
        
        let testResults = {
            email: false,
            sheets: false,
            capture: false,
            console: false
        };
        
        function updateResults() {
            const resultsDiv = document.getElementById('test-results');
            const allPassed = Object.values(testResults).every(result => result);
            
            resultsDiv.innerHTML = `
                <div class="status ${allPassed ? 'success' : 'warning'}">
                    <h4>${allPassed ? '‚úÖ All Tests Passed' : '‚ö†Ô∏è Some Tests Failed'}</h4>
                    <ul>
                        <li>Email System: ${testResults.email ? '‚úÖ' : '‚ùå'}</li>
                        <li>Google Sheets: ${testResults.sheets ? '‚úÖ' : '‚ùå'}</li>
                        <li>Form Capture: ${testResults.capture ? '‚úÖ' : '‚ùå'}</li>
                        <li>Console Logs: ${testResults.console ? '‚úÖ' : '‚ùå'}</li>
                    </ul>
                </div>
            `;
        }
        
        async function testEmailSystem() {
            const statusDiv = document.getElementById('email-status');
            statusDiv.innerHTML = '<div class="status warning">üîÑ Testing email system...</div>';
            
            try {
                const testData = {
                    firstName: 'Test',
                    lastName: 'User',
                    email: 'test@example.com',
                    phone: '555-1234',
                    state: 'CA',
                    coverageAmount: '50000',
                    formType: 'Test',
                    timestamp: new Date().toISOString()
                };
                
                const response = await fetch(GOOGLE_APPS_SCRIPT_URL, {
                    method: 'POST',
                    mode: 'cors',
                    headers: {
                        'Content-Type': 'application/json',
                    },
                    body: JSON.stringify(testData)
                });
                
                if (response.ok) {
                    const result = await response.json();
                    statusDiv.innerHTML = '<div class="status success">‚úÖ Email system working! Check michaelalfieri.ffl@gmail.com</div>';
                    testResults.email = true;
                } else {
                    throw new Error(`HTTP ${response.status}`);
                }
            } catch (error) {
                console.error('‚ùå Email test failed:', error);
                statusDiv.innerHTML = `<div class="status error">‚ùå Email test failed: ${error.message}</div>`;
                testResults.email = false;
            }
            
            updateResults();
        }
        
        async function testGoogleSheets() {
            const statusDiv = document.getElementById('sheets-status');
            statusDiv.innerHTML = '<div class="status warning">üîÑ Testing Google Sheets...</div>';
            
            try {
                // Test with different data to verify sheets are being updated
                const testData = {
                    firstName: 'Sheets',
                    lastName: 'Test',
                    email: 'sheets@test.com',
                    phone: '555-5678',
                    state: 'TX',
                    coverageAmount: '100000',
                    formType: 'SheetsTest',
                    timestamp: new Date().toISOString()
                };
                
                const response = await fetch(GOOGLE_APPS_SCRIPT_URL, {
                    method: 'POST',
                    mode: 'cors',
                    headers: {
                        'Content-Type': 'application/json',
                    },
                    body: JSON.stringify(testData)
                });
                
                if (response.ok) {
                    statusDiv.innerHTML = '<div class="status success">‚úÖ Google Sheets test successful! Check your sheet for new data.</div>';
                    testResults.sheets = true;
                } else {
                    throw new Error(`HTTP ${response.status}`);
                }
            } catch (error) {
                console.error('‚ùå Sheets test failed:', error);
                statusDiv.innerHTML = `<div class="status error">‚ùå Sheets test failed: ${error.message}</div>`;
                testResults.sheets = false;
            }
            
            updateResults();
        }
        
        function testFormCapture() {
            const statusDiv = document.getElementById('capture-status');
            statusDiv.innerHTML = '<div class="status warning">üîÑ Testing form capture...</div>';
            
            try {
                // Test if the main script is loaded
                if (typeof submitFormData === 'function') {
                    statusDiv.innerHTML = '<div class="status success">‚úÖ Form capture functions loaded</div>';
                    testResults.capture = true;
                } else {
                    throw new Error('submitFormData function not found');
                }
            } catch (error) {
                console.error('‚ùå Form capture test failed:', error);
                statusDiv.innerHTML = `<div class="status error">‚ùå Form capture test failed: ${error.message}</div>`;
                testResults.capture = false;
            }
            
            updateResults();
        }
        
        function checkConsole() {
            const statusDiv = document.getElementById('console-status');
            statusDiv.innerHTML = '<div class="status warning">üîÑ Checking console...</div>';
            
            try {
                // Check for any obvious errors
                const hasErrors = false; // This would need to be implemented with error tracking
                
                if (!hasErrors) {
                    statusDiv.innerHTML = '<div class="status success">‚úÖ Console appears clean (check browser dev tools for details)</div>';
                    testResults.console = true;
                } else {
                    throw new Error('Console errors detected');
                }
            } catch (error) {
                console.error('‚ùå Console check failed:', error);
                statusDiv.innerHTML = `<div class="status error">‚ùå Console check failed: ${error.message}</div>`;
                testResults.console = false;
            }
            
            updateResults();
        }
        
        // Auto-run basic tests on page load
        window.addEventListener('load', function() {
            testFormCapture();
            checkConsole();
        });
    </script>
</body>
</html> 